<html>
<head>
	<meta charset="UTF-8">
	<title>Foxie's Playground</title>
	<script src="../common/requirejs/require.js"></script>
	<script>
	require.config({
		packages: [{
			name: 'Foxie',
			location: '../../scripts/dist',
			main: 'Foxie'
		}]
	});
	</script>

	<!-- <script src="../../scripts/dist/Foxie.js"></script> -->
	<style>
		body {
			background: #313131;
		}
		.ball {
			width: 50px;
			height: 50px;
			background: #FFF;
			position: absolute;
			border-radius: 50%;
		}
	</style>
</head>
<body>
	<div id="ball"></div>
	<script>
		wait = function(t, f){
			return setTimeout(f, t);
		};

		require(['Foxie'], function(Foxie){

			wait(100, function(){

				getNewEl = function(){
					node = document.createElement('div')
					node.classList.add('ball')
					document.body.appendChild(node);
					return new Foxie(node);
				}
				els = []
				for (i = 0; i != 60; i++) {
					el = getNewEl()
					el.i = i;
					els.push(el);
				}

				t = 300;

				bringIn = function(){
					for (i = 0; i < els.length; i++) {
						bringElIn(els[i]);
					}
				};

				takeOut = function(){
					for (i = 0; i < els.length; i++) {
						takeElOut(els[i]);
					}
				};

				bringElIn = function(el){
					el
					.noTrans()
					.setOpacity(0)
					.trans(t)
					.moveXTo(Math.random() * 600)
					.moveYTo(el.i * 60 + 5)
					.setOpacity(1)
				};

				takeElOut = function(el){
					el
					.noTrans()
					.setOpacity(1)
					.moveXTo(0)
					.moveYTo(el.i * 60)
				}

				bringIn();

				document.addEventListener('keydown', function(){
					if (event.keyCode == 37) {
						takeOut();
					} else if (event.keyCode == 39) {
						bringIn();
					}
				})
			});



		});
	</script>
</body>
</html>